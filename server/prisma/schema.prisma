generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id                  String   @id @default(uuid())
  fullName            String
  email               String   @unique
  phone               String?
  adventureInterests  String[]
  experienceLevel     ExperienceLevel
  location            String
  hearAboutUs         String
  emailVerified       Boolean  @default(false)
  verificationToken   String?  @unique
  createdAt           DateTime @default(now())
  updatedAt           DateTime @updatedAt

  @@index([email])
  @@index([createdAt])
  @@map("users")
}

model Partner {
  id              String        @id @default(uuid())
  companyName     String
  contactPerson   String
  email           String        @unique
  phone           String
  businessType    BusinessType
  adventureTypes  String[]
  location        String
  website         String?
  description     String
  status          PartnerStatus @default(pending)
  createdAt       DateTime      @default(now())
  updatedAt       DateTime      @updatedAt

  @@index([email])
  @@index([status])
  @@index([createdAt])
  @@map("partners")
}

model EventRegistration {
  id                   String       @id @default(uuid())
  fullName             String
  email                String
  phone                String
  attendeeType         AttendeeType
  dietaryRestrictions  String?
  confirmed            Boolean      @default(false)
  createdAt            DateTime     @default(now())

  @@index([email])
  @@index([createdAt])
  @@map("event_registrations")
}

model ApiLog {
  id           String   @id @default(uuid())
  endpoint     String
  method       String
  statusCode   Int
  responseTime Int
  ipAddress    String?
  userAgent    String?
  errorMessage String?
  createdAt    DateTime @default(now())

  @@index([createdAt])
  @@index([statusCode])
  @@index([endpoint])
  @@map("api_logs")
}

model Newsletter {
  id        String   @id @default(uuid())
  email     String   @unique
  active    Boolean  @default(true)
  createdAt DateTime @default(now())

  @@index([email])
  @@map("newsletter")
}

enum ExperienceLevel {
  beginner
  intermediate
  advanced
}

enum BusinessType {
  tour_operator
  equipment_rental
  accommodation
  training_center
  other
}

enum PartnerStatus {
  pending
  approved
  rejected
}

enum AttendeeType {
  user
  partner
  investor
  media
}